<!DOCTYPE html>
<html lang="en">
  <head>

    <!--

    Hi! Welcome to our source code.

    This dashboard uses data from the Digital Analytics Program, a US
    government team inside the General Services Administration, an independent
    federal agency.


    For a detailed tech breakdown of how 18F and friends built this site:

    https://18f.gsa.gov/2015/03/19/how-we-built-analytics-usa-gov/


    This is a fully open source project, and your contributions are welcome.

    Frontend static site: https://github.com/GSA/analytics.usa.gov
    Backend data reporting: https://github.com/18F/analytics-reporter

    -->

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="google-site-verification" content="NjbZn6hQe7OwV-nTsa6nLmtrOUcSGPRyFjxm5zkmCcg" />

    <link rel="stylesheet" href="/css/public_analytics.css">
    <link rel="icon" type="image/x-icon" href="images/analytics-favicon.ico">

    <meta name="twitter:site" content="@usgsa">
    <meta name="twitter:creator" content="@usgsa">
    <meta property="og:type" content="website" />

    <meta property="og:url" content="http://localhost:4000" />
    <link rel="canonical" href="http://localhost:4000" />

    <title>analytics.usa.gov | The US government's web traffic.</title>
    <meta property="og:title" content="analytics.usa.gov | The US government's web traffic." />
    <meta property="og:site_name" content="analytics.usa.gov | The US government's web traffic." />

    <meta name="description" content="Official data on web traffic to hundreds of US federal government websites. Published by the Digital Analytics Program.">
    <meta property="og:description" content="Official data on web traffic to hundreds of US federal government websites. Published by the Digital Analytics Program." />

    <meta name="twitter:card" content="summary_large_image">
    <meta property="og:image" content="http://localhost:4000/images/share-image.png" />
    <script src="/js/vendor/d3.v3.min.js"></script>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48605964-36', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('set', 'forceSSL', true);
    ga('send', 'pageview');

    document.addEventListener("DOMContentLoaded", function(event) {

      d3.selectAll('.download-data').on('click', function() {
        var link = this.href;
        var text = this.text;
        ga('send','event','Download Data', link, text);
      });

      d3.selectAll('.external-link').on('click', function() {
        var link = this.href;
        var text = this.text;
        ga('send','event','External Link', link, text);
      });

      d3.selectAll('.top-download-page').on('click', function() {
        var link = this.href;
        var text = this.text;
        ga('send','event','Top-Download Page', link, text);
      });

      d3.selectAll('.top-download-file').on('click', function() {
        var link = this.href;
        var text = this.text;
        ga('send','event','Top-Download File', link, text);
      });

    });
  </script>

    <!--[if lte IE 9]>
    <script src="/js/vendor/aight.v2.min.js"></script>
    <![endif]-->

    <script src="/js/vendor/q.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/css/google-fonts.css" rel="stylesheet" />
  </head>

  <body>

    <!-- Initalize title and data source variables -->
    
    <header id="usa_dot_gov_header">
      <div class="header_container">
        <h1>
          <a href="/" class="external-link anlytics-title"><b>analytics</b>.usa.gov</a>
          
          <div id="agency-selector-wrap">
            &nbsp-
            <select class="agency-selector">
              <option value="/">All Participating Websites</option>
              
                <option value="/commerce/">Department of Commerce</option>
              
                <option value="/education/">Department of Education</option>
              
                <option value="/energy/">Department of Energy</option>
              
                <option value="/environmental-protection-agency/">Environmental Protection Agency</option>
              
                <option value="/interior/">Department of the Interior</option>
              
                <option value="/justice/">Department of Justice</option>
              
                <option value="/national-aeronautics-space-administration/">National Aeronautics and Space Administration</option>
              
                <option value="/national-archives-records-administration/">National Archives and Records Administration</option>
              
                <option value="/small-business-administration/">Small Business Administration</option>
              
                <option value="/veterans-affairs/">Department of Veterans Affairs</option>
              
            </select>
          </div>
          
        </h1>

        <a id="about" href="#explanation" class="site-nav">About this site</a>
        
          <div id="agency-selector-wrap-small">
            <select class="agency-selector">
              <option value="/">All Participating Websites</option>
              
                <option value="/commerce/">Department of Commerce</option>
              
                <option value="/education/">Department of Education</option>
              
                <option value="/energy/">Department of Energy</option>
              
                <option value="/environmental-protection-agency/">Environmental Protection Agency</option>
              
                <option value="/interior/">Department of the Interior</option>
              
                <option value="/justice/">Department of Justice</option>
              
                <option value="/national-aeronautics-space-administration/">National Aeronautics and Space Administration</option>
              
                <option value="/national-archives-records-administration/">National Archives and Records Administration</option>
              
                <option value="/small-business-administration/">Small Business Administration</option>
              
                <option value="/veterans-affairs/">Department of Veterans Affairs</option>
              
            </select>
          </div>
          
      </div>

      <div id="color_bar"></div>
    </header>

    <div class="container">
      <h1>Hello!</h1>

<analytics-bars format="%" data='[{"key": "IE", "value": 100},{"key": "Chrome", "value": 50}]'></analytics-bars>

<analytics-bars data='[{"key": "OSX", "value": 10000},{"key": "Windows", "value": 50000}]'></analytics-bars>
<script src="/js/vendor/document-register-element.min.js"></script>
<script src="/js/vendor/x-tag-no-polyfills.min.js"></script>
<script>

var formatPercent = function(p) {
  return p >= .1
    ? p.toFixed(1) + '%'
    : '< 0.1%';
};

xtag.register('analytics-bar', {
  content: [
    '<span class="label"></span>',
    '<span class="value"></span>',
    '<div class="bar"></span>'
  ].join(''),

  lifecycle: {
    created: function() {
      this.__value = 0;
      this.__max = 100;
      this.xtag.label = this.querySelector('.label');
      this.xtag.value = this.querySelector('.value');
      this.xtag.bar = this.querySelector('.bar');
      this.format = this.getAttribute('format');
    }
  },

  methods: {
    update: function() {
      var size = 100 * this.value / this.max;
      this.xtag.value.innerText = this.__format(this.value);
      this.xtag.bar.style.setProperty('width', size + '%');
    },
  },

  accessors: {
    label: {
      get: function() {
        return this.xtag.label.innerText;
      },
      set: function(value) {
        this.xtag.label.innerText = value;
      }
    },
    value: {
      get: function() {
        return this.__value;
      },
      set: function(value) {
        if (this.__value !== value) {
          this.__value = value;
          this.update();
        }
      }
    },
    format: {
      get: function() {
        return this.__format;
      },
      set: function(format) {
        if (this.__format !== format) {
          this.__format = format === '%'
            ? formatPercent
            : d3.format(format || ',');
          this.update();
        }
      }
    }
  }
});

xtag.register('analytics-bars', {
  lifecycle: {
    created: function() {
      if (this.hasAttribute('data')) {
        this.data = JSON.parse(this.getAttribute('data'));
      }
      if (this.hasAttribute('data-url')) {
        this.load(this.getAttribute('data-url'));
      }
    }
  },

  methods: {
    load: function(url) {
      var self = this;
      d3.json(url, function(error, data) {
        if (error) {
          console.error('no data:', url, error);
          return;
        }
        self.data = data;
      });
    },

    update: function() {
      var data = this.__data;
      var max = d3.max(data, function(d) { return d.value; });
      var bars = d3.select(this)
        .selectAll('analytics-bar')
          .data(data, function(d) { return d.key; });
      bars.exit().remove();
      bars.enter().append('analytics-bar');
      bars
        .property('format', this.getAttribute('format'))
        .property('label', function(d) { return d.key; })
        .property('max', max)
        .property('value', function(d) { return d.value; });
    }
  },

  accessors: {
    data: {
      get: function() {
        return this.__data;
      },
      set: function(data) {
        this.__data = data;
        this.update();
      }
    }
  }
});
</script>

    </div>
  </body>


  <!--
    IE detection, used to guide console formatting in subsequent include.
  -->
  <script type="text/javascript">window._ie9 = false;</script>

  <!--[if IE 9 ]>
    <script type="text/javascript">window._ie9 = true;</script>
  <![endif]-->

  <!--
   IE10 JS targeting: https://stackoverflow.com/a/17099988
   IE11 JS targeting: https://stackoverflow.com/a/17447695
  -->
  <script type="text/javascript">
    window._ie10 = ("onpropertychange" in document && !!window.matchMedia);
    window._ie11 = !!navigator.userAgent.match(/Trident\/7.0; rv 11/);
    window._ie = window._ie9 || window._ie10 || window._ie11;
  </script>

  <script src="/js/index.js"></script>

  <!-- report to oneself -->
  <script id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=GSA&exts=json"></script>
</html>
